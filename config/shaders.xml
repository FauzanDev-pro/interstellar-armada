<?xml version="1.0" encoding="UTF-8"?>
<Shaders>
    <Cubemap name="deepspace">
        <image url="textures/cube/cm_1c2.jpg" direction="pos_x" />
        <image url="textures/cube/cm_1c2.jpg" direction="neg_x" />
        <image url="textures/cube/cm_1c2.jpg" direction="pos_y" />
        <image url="textures/cube/cm_1c2.jpg" direction="neg_y" />
        <image url="textures/cube/cm_1c2.jpg" direction="pos_z" />
        <image url="textures/cube/cm_1c2.jpg" direction="neg_z" />
    </Cubemap>
    
    <Shader name="oneColor">
        <vertex filename="mesh/oneColor.vert" />
        <fragment filename="mesh/oneColor.frag" />
        <state>
            <blendType value="mix" />
        </state>
        <attributes>
            <attribute name="a_position" size="3" role="position" />
        </attributes>
        <uniforms>
            <uniform name="u_modelMatrix" type="mat4" />
            <uniform name="u_cameraMatrix" type="mat4" />
            <uniform name="u_projMatrix" type="mat4" />
            <uniform name="u_color" type="vec4" />
        </uniforms>
    </Shader>
    
    <Shader name="colored">
        <vertex filename="mesh/colored.vert" />
        <fragment filename="mesh/colored.frag" />
        <state>
            <blendType value="mix" />
        </state>
        <attributes>
            <attribute name="a_position" size="3" role="position" />
            <attribute name="a_color" size="4" role="color" />
        </attributes>
        <uniforms>
            <uniform name="u_modelMatrix" type="mat4" />
            <uniform name="u_cameraMatrix" type="mat4" />
            <uniform name="u_projMatrix" type="mat4" />
        </uniforms>
    </Shader>
    
    <Shader name="textured" fallback="colored">
        <vertex filename="mesh/textured.vert" />
        <fragment filename="mesh/textured.frag" />
        <state>
            <blendType value="mix" />
        </state>
        <attributes>
            <attribute name="a_position" size="3" role="position" />
            <attribute name="a_texCoord" size="2" role="texCoord" />
            <attribute name="a_color" size="4" role="color" />
        </attributes>
        <uniforms>
            <uniform name="u_modelMatrix" type="mat4" />
            <uniform name="u_cameraMatrix" type="mat4" />
            <uniform name="u_projMatrix" type="mat4" />
            <uniform name="u_colorTexture" type="sampler2D" />
        </uniforms>
    </Shader>
    
    <Shader name="lambert" fallback="textured">
        <vertex filename="mesh/lambert.vert" />
        <fragment filename="mesh/lambert.frag" />
        <state>
            <blendType value="mix" />
        </state>
        <attributes>
            <attribute name="a_position" size="3" role="position" />
            <attribute name="a_texCoord" size="2" role="texCoord" />
            <attribute name="a_normal" size="3" role="normal" />
            <attribute name="a_color" size="4" role="color" />
        </attributes>
        <uniforms>
            <uniform name="u_modelMatrix" type="mat4" />
            <uniform name="u_cameraMatrix" type="mat4" />
            <uniform name="u_projMatrix" type="mat4" />
            <uniform name="u_normalMatrix" type="mat3" />
            <uniform name="u_colorTexture" type="sampler2D" />
            <uniform name="u_lights" type="struct" arraySize="1" />
            <uniform name="color" memberOf="u_lights" type="vec3" />
            <uniform name="direction" memberOf="u_lights" type="vec3" />
        </uniforms>
    </Shader>
    
    <Shader name="lambert-with-luminosity" fallback="lambert">
        <vertex filename="mesh/lambert-with-luminosity.vert" />
        <fragment filename="mesh/lambert-with-luminosity.frag" />
        <state>
            <blendType value="mix" />
        </state>
        <attributes>
            <attribute name="a_position" size="3" role="position" />
            <attribute name="a_texCoord" size="2" role="texCoord" />
            <attribute name="a_normal" size="3" role="normal" />
            <attribute name="a_color" size="4" role="color" />
            <attribute name="a_luminosity" size="1" role="luminosity" />
        </attributes>
        <uniforms>
            <uniform name="u_modelMatrix" type="mat4" />
            <uniform name="u_cameraMatrix" type="mat4" />
            <uniform name="u_projMatrix" type="mat4" />
            <uniform name="u_normalMatrix" type="mat3" />
            <uniform name="u_colorTexture" type="sampler2D" />
            <uniform name="u_lights" type="struct" arraySize="1" />
            <uniform name="color" memberOf="u_lights" type="vec3" />
            <uniform name="direction" memberOf="u_lights" type="vec3" />
        </uniforms>
    </Shader>
	
    <Shader name="simple" fallback="lambert-with-luminosity">
        <vertex filename="mesh/simple.vert" />
        <fragment filename="mesh/simple.frag" />
        <state>
            <blendType value="mix" />
        </state>
        <attributes>
            <attribute name="a_position" size="3" role="position" />
            <attribute name="a_texCoord" size="2" role="texCoord" />
            <attribute name="a_normal" size="3" role="normal" />
            <attribute name="a_color" size="4" role="color" />
            <attribute name="a_luminosity" size="1" role="luminosity" />
            <attribute name="a_shininess" size="1" role="shininess" />	
        </attributes>
        <uniforms>
            <uniform name="u_modelMatrix" type="mat4" />
            <uniform name="u_cameraMatrix" type="mat4" />
            <uniform name="u_projMatrix" type="mat4" />
            <uniform name="u_normalMatrix" type="mat3" />
            <uniform name="u_colorTexture" type="sampler2D" />
            <uniform name="u_specularTexture" type="sampler2D" />
            <uniform name="u_numLights" type="int" />
            <uniform name="u_lights" type="struct" arraySize="12" />
            <uniform name="color" memberOf="u_lights" type="vec3" />
            <uniform name="direction" memberOf="u_lights" type="vec3" />
            <uniform name="u_eyePos" type="vec3" />
        </uniforms>
    </Shader>
        
    <Shader name="simpleReveal" fallback="lambert-with-luminosity">
        <vertex filename="mesh/simpleWithModelPos.vert" />
        <fragment filename="mesh/simpleReveal.frag" />
        <state>
            <blendType value="mix" />
        </state>
        <attributes>
            <attribute name="a_position" size="3" role="position" />
            <attribute name="a_texCoord" size="2" role="texCoord" />
            <attribute name="a_normal" size="3" role="normal" />
            <attribute name="a_color" size="4" role="color" />
            <attribute name="a_luminosity" size="1" role="luminosity" />
            <attribute name="a_shininess" size="1" role="shininess" />	
        </attributes>
        <uniforms>
            <uniform name="u_modelMatrix" type="mat4" />
            <uniform name="u_cameraMatrix" type="mat4" />
            <uniform name="u_projMatrix" type="mat4" />
            <uniform name="u_normalMatrix" type="mat3" />
            <uniform name="u_colorTexture" type="sampler2D" />
            <uniform name="u_specularTexture" type="sampler2D" />
            <uniform name="u_numLights" type="int" />
            <uniform name="u_lights" type="struct" arraySize="12" />
            <uniform name="color" memberOf="u_lights" type="vec3" />
            <uniform name="direction" memberOf="u_lights" type="vec3" />
            <uniform name="u_eyePos" type="vec3" />
            <uniform name="u_revealStart" type="float" />
            <uniform name="u_revealTransitionLength" type="float" />
            <uniform name="u_revealFront" type="bool" />
        </uniforms>
    </Shader>
        
    <Shader name="oneColorReveal" fallback="oneColor">
        <vertex filename="mesh/simpleWithModelPos.vert" />
        <fragment filename="mesh/oneColorReveal.frag" />
        <state>
            <blendType value="mix" />
        </state>
        <attributes>
            <attribute name="a_position" size="3" role="position" />
        </attributes>
        <uniforms>
            <uniform name="u_modelMatrix" type="mat4" />
            <uniform name="u_cameraMatrix" type="mat4" />
            <uniform name="u_projMatrix" type="mat4" />
            <uniform name="u_color" type="vec4" />
            <uniform name="u_revealStart" type="float" />
            <uniform name="u_revealTransitionLength" type="float" />
            <uniform name="u_revealFront" type="bool" />
        </uniforms>
    </Shader>
        
    <Shader name="ship" fallback="lambert-with-luminosity">
        <vertex filename="mesh/ship.vert" />
        <fragment filename="mesh/ship.frag" />
        <state>
            <blendType value="mix" />
        </state>
        <attributes>
            <attribute name="a_position" size="3" role="position" />
            <attribute name="a_texCoord" size="2" role="texCoord" />
            <attribute name="a_normal" size="3" role="normal" />
            <attribute name="a_color" size="4" role="color" />
            <attribute name="a_luminosity" size="1" role="luminosity" />
            <attribute name="a_shininess" size="1" role="shininess" />
            <attribute name="a_groupIndex" size="1" role="groupIndex" />
            <attribute name="a_index" size="4" role="triangleIndex" />
        </attributes>
        <uniforms>
            <uniform name="u_modelMatrix" type="mat4" />
            <uniform name="u_cameraMatrix" type="mat4" />
            <uniform name="u_projMatrix" type="mat4" />
            <uniform name="u_normalMatrix" type="mat3" />
            <uniform name="u_colorTexture" type="sampler2D" />
            <uniform name="u_specularTexture" type="sampler2D" />
            <uniform name="u_luminosityTexture" type="sampler2D" />
            <uniform name="u_shadowMaps" type="sampler2D" arraySize="12" />
            <uniform name="u_numLights" type="int" />
            <uniform name="u_lights" type="struct" arraySize="2" />
            <uniform name="u_shadowMapRanges" type="float" arraySize="6" />
            <uniform name="u_numRanges" type="int" />
            <uniform name="u_shadowMapDepthRatio" type="float" />
            <uniform name="u_shadows" type="bool" />
            <uniform name="color" memberOf="u_lights" type="vec3" />
            <uniform name="direction" memberOf="u_lights" type="vec3" />
            <uniform name="matrix" memberOf="u_lights" type="mat4" />
            <uniform name="translationVector" memberOf="u_lights" type="vec3" />
            <uniform name="u_eyePos" type="vec3" />
            <uniform name="u_luminosityFactors" type="float" arraySize="20" />
        </uniforms>
    </Shader>
    
    <Shader name="shadowMapReveal" fallback="lambert-with-luminosity">
        <vertex filename="mesh/modelPosShadowMapping.vert" />
        <fragment filename="mesh/shadowMapReveal.frag" />
        <state>
            <blendType value="mix" />
        </state>
        <attributes>
            <attribute name="a_position" size="3" role="position" />
            <attribute name="a_texCoord" size="2" role="texCoord" />
            <attribute name="a_normal" size="3" role="normal" />
            <attribute name="a_color" size="4" role="color" />
            <attribute name="a_luminosity" size="1" role="luminosity" />
            <attribute name="a_shininess" size="1" role="shininess" />
            <attribute name="a_index" size="4" role="triangleIndex" />
        </attributes>
        <uniforms>
            <uniform name="u_modelMatrix" type="mat4" />
            <uniform name="u_cameraMatrix" type="mat4" />
            <uniform name="u_projMatrix" type="mat4" />
            <uniform name="u_normalMatrix" type="mat3" />
            <uniform name="u_colorTexture" type="sampler2D" />
            <uniform name="u_specularTexture" type="sampler2D" />
            <uniform name="u_shadowMaps" type="sampler2D" arraySize="12" />
            <uniform name="u_numLights" type="int" />
            <uniform name="u_lights" type="struct" arraySize="2" />
            <uniform name="u_shadowMapRanges" type="float" arraySize="6" />
            <uniform name="u_numRanges" type="int" />
            <uniform name="u_shadowMapDepthRatio" type="float" />
            <uniform name="u_shadows" type="bool" />
            <uniform name="color" memberOf="u_lights" type="vec3" />
            <uniform name="direction" memberOf="u_lights" type="vec3" />
            <uniform name="matrix" memberOf="u_lights" type="mat4" />
            <uniform name="translationVector" memberOf="u_lights" type="vec3" />
            <uniform name="u_eyePos" type="vec3" />
            <uniform name="u_revealStart" type="float" />
            <uniform name="u_revealTransitionLength" type="float" />
            <uniform name="u_revealFront" type="bool" />
        </uniforms>
    </Shader>
	
    <Shader name="skybox">
        <vertex filename="billboard/skybox.vert" />
        <fragment filename="billboard/skybox.frag" />
        <state>
            <blendType value="none" />
        </state>
        <attributes>
            <attribute name="a_position" size="3" role="position" />
        </attributes>
        <uniforms>
            <uniform name="u_viewDirectionProjectionInverse" type="mat4" />
            <uniform name="u_skyboxCubemap" type="samplerCube" />
        </uniforms>
    </Shader>
	
    <Shader name="billboard">
        <vertex filename="billboard/billboard.vert" />
        <fragment filename="billboard/billboard.frag" />
        <state>
            <blendType value="add" />
        </state>
        <attributes>
            <attribute name="a_position" size="3" role="position" />
            <attribute name="a_texCoord" size="2" role="texCoord" />
        </attributes>
        <uniforms>
            <uniform name="u_modelMatrix" type="mat4" />
            <uniform name="u_cameraMatrix" type="mat4" />
            <uniform name="u_projMatrix" type="mat4" />
            <uniform name="u_colorTexture" type="sampler2D" />
            <uniform name="u_eyePos" type="vec3" />
        </uniforms>
    </Shader>
	
    <Shader name="particle">
        <vertex filename="billboard/particle.vert" />
        <fragment filename="billboard/particle.frag" />
        <state>
            <blendType value="add" />
        </state>
        <attributes>
            <attribute name="a_position" size="3" role="position" />
            <attribute name="a_texCoord" size="2" role="texCoord" />
        </attributes>
        <uniforms>
            <uniform name="u_modelMatrix" type="mat4" />
            <uniform name="u_cameraMatrix" type="mat4" />
            <uniform name="u_projMatrix" type="mat4" />
            <uniform name="u_billboardSize" type = "float" />
            <uniform name="u_relAge" type="float" />
            <uniform name="u_colorTexture" type="sampler2D" />
            <uniform name="u_color" type="vec3" />
        </uniforms>
    </Shader>
	
    <Shader name="permanentParticle">
        <vertex filename="billboard/linearSizeParticle.vert" />
        <fragment filename="billboard/particle.frag" />
        <state>
            <blendType value="add" />
        </state>
        <attributes>
            <attribute name="a_position" size="3" role="position" />
            <attribute name="a_texCoord" size="2" role="texCoord" />
        </attributes>
        <uniforms>
            <uniform name="u_modelMatrix" type="mat4" />
            <uniform name="u_cameraMatrix" type="mat4" />
            <uniform name="u_projMatrix" type="mat4" />
            <uniform name="u_billboardSize" type = "float" />
            <uniform name="u_relAge" type="float" />
            <uniform name="u_colorTexture" type="sampler2D" />
            <uniform name="u_color" type="vec3" />
        </uniforms>
    </Shader>
        
    <Shader name="backgroundBillboard">
        <vertex filename="billboard/backgroundBillboard.vert" />
        <fragment filename="billboard/particle.frag" />
        <state>
            <blendType value="add" />
        </state>
        <attributes>
            <attribute name="a_position" size="3" role="position" />
            <attribute name="a_texCoord" size="2" role="texCoord" />
        </attributes>
        <uniforms>
            <uniform name="u_modelMatrix" type="mat4" />
            <uniform name="u_cameraOrientationMatrix" type="mat4" />
            <uniform name="u_projMatrix" type="mat4" />
            <uniform name="u_billboardSize" type = "float" />
            <uniform name="u_relAge" type="float" />
            <uniform name="u_colorTexture" type="sampler2D" />
            <uniform name="u_color" type="vec3" />
        </uniforms>
    </Shader>
        
    <Shader name="dust">
        <vertex filename="dust.vert" />
        <fragment filename="dust.frag" />
        <state>
            <blendType value="none" />
        </state>
        <attributes>
            <attribute name="a_position" size="3" role="position" />
        </attributes>
        <uniforms>
            <uniform name="u_modelMatrix" type="mat4" />
            <uniform name="u_cameraMatrix" type="mat4" />
            <uniform name="u_projMatrix" type="mat4" />
            <uniform name="u_color" type="vec3" />
            <uniform name="u_shift" type="vec3" />
            <uniform name="u_length" type="float" />
            <uniform name="u_farthestZ" type="float" />
        </uniforms>
    </Shader>
    
    <Shader name="shadowMapping">
        <vertex filename="shadow-mapping.vert" />
        <fragment filename="shadow-mapping.frag" />
        <state>
            <blendType value="mix" />
        </state>
        <attributes>
            <attribute name="a_position" size="3" role="position" />
            <attribute name="a_triangleIndex" size="4" role="triangleIndex" />
        </attributes>
        <uniforms>
            <uniform name="u_modelMatrix" type="mat4" />
            <uniform name="u_lightMatrix" type="mat4" />
            <uniform name="u_projMatrix" type="mat4" />
            <uniform name="u_shadowMapDepth" type="float" />
        </uniforms>
    </Shader>
</Shaders>
